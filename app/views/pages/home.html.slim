= form_tag search_path, method: :get do
  = text_field_tag :player_name
  = hidden_field_tag :player_id
  = submit_tag t('.search')
  
javascript:
  $(document).ready(function () {  
    /* Player name autocomplete */
    $("#player_name").autocomplete({
      source: function (request, response) {
        $.getJSON("/players/search", {
          name: request.term,
        }, response );
      },
      minLength: 2,
      select: function (event, ui) {
        $("#player_id").val(ui.item.id);                
      }
    })
    .each(function (i) {
      $(this).data("ui-autocomplete")._renderItem = function(ul, item) {
        return $( "<li>" )
          .append( "<a> <span style='display:inline-block;' class='flag flag-" + item.country_code + "'></span> <b>" + item.name + "</b>, " + item.full_name + " (" + item.birthday + ")" + "</a>" )
          .appendTo( ul );
      };
    });
  });